"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[979],{8179:function(s,e,o){o.r(e),o.d(e,{default:function(){return b}});var t=o(641),a=o(33),n=o(3751),i=o.p+"img/logo.96922e48.png";const l=s=>((0,t.Qi)("data-v-659a1a96"),s=s(),(0,t.jt)(),s),r={class:"containerlogin",style:{}},u={class:"left_side"},d=l((()=>(0,t.Lk)("span",null,[(0,t.Lk)("img",{src:i,alt:""})],-1))),p=l((()=>(0,t.Lk)("h2",null,"Autentificação",-1))),h=["type"],c=l((()=>(0,t.Lk)("label",{style:{cursor:"pointer"},for:"lembrar"}," Lembrar username",-1))),g=l((()=>(0,t.Lk)("section",{class:"right_side"},[(0,t.Lk)("img",{src:"",alt:""})],-1)));function m(s,e,o,i,l,m){const w=(0,t.g2)("Icon");return(0,t.uX)(),(0,t.CE)("section",r,[(0,t.Lk)("section",u,[d,(0,t.Lk)("form",null,[p,(0,t.bo)((0,t.Lk)("input",{onChange:e[0]||(e[0]=(...s)=>m.validForm&&m.validForm(...s)),"onUpdate:modelValue":e[1]||(e[1]=s=>l.usernameValue=s),style:(0,a.Tr)({border:l.usernameValue.length<4&&l.tryLogin?"1px solid red":"none"}),type:"text",placeholder:"username...",autofocus:""},null,36),[[n.Jo,l.usernameValue]]),(0,t.Lk)("span",{class:"pass",style:(0,a.Tr)({border:l.passwordValue.length<4&&l.tryLogin?"1px solid red":"none"})},[(0,t.bo)((0,t.Lk)("input",{onChange:e[2]||(e[2]=(...s)=>m.validForm&&m.validForm(...s)),"onUpdate:modelValue":e[3]||(e[3]=s=>l.passwordValue=s),type:l.inputType,class:"inputPassword",placeholder:"password...",style:{"box-shadow":"none"}},null,40,h),[[n.hp,l.passwordValue]]),l.showPass?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(w,{key:0,onClick:m.toogleShowPassword,class:"show-pass",icon:"mdi:show"},null,8,["onClick"])),l.showPass?((0,t.uX)(),(0,t.Wv)(w,{key:1,onClick:m.toogleShowPassword,class:"show-pass",icon:"mdi:hide"},null,8,["onClick"])):(0,t.Q3)("",!0)],4),(0,t.Lk)("span",null,[(0,t.Lk)("span",null,[(0,t.Lk)("input",{type:"checkbox",name:"lembrar",style:(0,a.Tr)({border:l.usernameValue.length<8&&l.tryLogin?"1px solid red":"none"}),id:"lembrar"},null,4),c])]),(0,t.Lk)("button",{id:"btn-login",type:"button",onClick:e[4]||(e[4]=(...s)=>m.login&&m.login(...s)),disabled:"",ref:"btnLogin"},"Entrar",512)])]),g])}var w=o(1250),y=o(8384),k={name:"Login",data(){return{usernameValue:"",tryLogin:!1,trying:0,passwordValue:"",showPass:!1,inputType:"password",user:null,role:null,fail:!1,ip:"",counter:0}},methods:{validForm(){""!==this.usernameValue&&""!==this.passwordValue&&(this.$refs.btnLogin.disabled=!1)},async login(){let s=document.getElementById("btn-login");if(this.tryLogin=!0,this.trying>3)1!=s.disabled&&(s.disabled=!0);else{this.trying++,w.A.get("https://api.ipify.org?format=json").then((s=>{this.ip=s.data.ip,console.log(s.data.ip)})).catch((s=>{console.error(s)})),console.log("URL: ",`${y.C}/login/?key=${y._}`);try{const s=await w.A.post(`${y.C}/login/?key=${y._}`,{username:this.usernameValue,password:this.passwordValue,ip:this.ip}).catch((s=>{"Network Error"!=s.message||this.$swal.fire({position:"top",icon:"error",title:"Falha no servidor, tente mais tarde!",showConfirmButton:!1,timer:1500,toast:!0})}));this.user=s.data.data.user,this.role=s.data.data.role,this.fail=!1}catch(e){this.fail=!0,console.log("Erro no login: ",e)}if(this.fail)this.$swal.fire({position:"top",icon:"error",title:"Falha na autentificação",showConfirmButton:!1,timer:1500,toast:!0});else{try{localStorage.setItem("userData",JSON.stringify(this.user)),localStorage.setItem("role",JSON.stringify(this.role))}catch(o){console.log(o)}this.$router.push("/")}}},toogleShowPassword(){this.showPass=!this.showPass,"password"==this.inputType?this.inputType="text":this.inputType="password"}},created(){}},f=o(6262);const L=(0,f.A)(k,[["render",m],["__scopeId","data-v-659a1a96"]]);var b=L}}]);
//# sourceMappingURL=979.dbc22112.js.map