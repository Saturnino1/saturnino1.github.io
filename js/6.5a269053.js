"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[6],{1528:function(t,e,o){o.d(e,{A:function(){return p}});var a=o(641);const s=t=>((0,a.Qi)("data-v-79e46594"),t=t(),(0,a.jt)(),t),r={class:"popup-container"},i=s((()=>(0,a.Lk)("header",null,[(0,a.Lk)("h1",{style:{"text-align":"center",color:"transparent"}},"Pop Up")],-1))),n={class:"pop-main-contet"};function l(t,e,o,s,l,c){return(0,a.uX)(),(0,a.CE)("section",r,[i,(0,a.Lk)("section",n,[(0,a.RG)(t.$slots,"default",{},void 0,!0)])])}var c={data(){return{}},components:{},methods:{}},d=o(6262);const u=(0,d.A)(c,[["render",l],["__scopeId","data-v-79e46594"]]);var p=u},6006:function(t,e,o){o.r(e),o.d(e,{default:function(){return K}});var a=o(641),s=o(33);const r=t=>((0,a.Qi)("data-v-4d3382d0"),t=t(),(0,a.jt)(),t),i={class:"right-side"},n={class:"main-content"},l=r((()=>(0,a.Lk)("header",null,[(0,a.Lk)("h2",null,"Utilizadores do sistema")],-1))),c={class:"table-container",style:{width:"100%"}},d={class:"options-crud"},u=r((()=>(0,a.Lk)("span",null,"Registrar",-1))),p={class:"table-1"},h=r((()=>(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"username"),(0,a.Lk)("th",null,"password"),(0,a.Lk)("th",null,"role"),(0,a.Lk)("th",null,"status"),(0,a.Lk)("th",null,"acoes")])],-1))),m={class:"btn-form-row"},k=["onClick"],w=["onClick"],f={key:0},C=r((()=>(0,a.Lk)("td",{style:{"text-align":"center",padding:"1em",opacity:".8"},colspan:"8"}," Sem registros ",-1))),g=[C];function L(t,e,o,r,C,L){const v=(0,a.g2)("asideNavBar"),F=(0,a.g2)("headerNav"),$=(0,a.g2)("Icon");(0,a.g2)("utilizadorForm"),(0,a.g2)("popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(v),(0,a.Lk)("section",i,[(0,a.bF)(F),(0,a.Lk)("section",n,[l,(0,a.Lk)("section",c,[(0,a.Lk)("section",d,[(0,a.Lk)("button",{onClick:e[0]||(e[0]=t=>L.openPopUp(null,"Registrar")),class:"criar-btn"},[(0,a.bF)($,{icon:"mdi:register"}),u])]),(0,a.Lk)("table",p,[h,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(C.users,((t,e,o)=>((0,a.uX)(),(0,a.CE)("tr",{key:e},[(0,a.Lk)("td",null,(0,s.v_)(t.username??"N/A"),1),(0,a.Lk)("td",null,(0,s.v_)(t.password??"N/A"),1),(0,a.Lk)("td",null,(0,s.v_)(t.role_name??"N/A"),1),(0,a.Lk)("td",null,(0,s.v_)(t.status??"N/A"),1),(0,a.Lk)("td",null,[(0,a.Lk)("div",m,[(0,a.Lk)("button",{onClick:e=>L.openPopUp(t),title:"editar"},[(0,a.bF)($,{class:"edit icon",icon:"raphael:edit"})],8,k),(0,a.Lk)("button",{title:"eliminar",onClick:e=>L.deleteRegister(t.id)},[(0,a.bF)($,{class:"delete icon",icon:"ic:round-delete"})],8,w)])])])))),128)),208===C.status?((0,a.uX)(),(0,a.CE)("tr",f,g)):(0,a.Q3)("",!0)])])])]),(0,a.Q3)("",!0)])],64)}var v=o(9580),F=o(8241),$=o(1528),b=o(1250),B=o(3751);const y=t=>((0,a.Qi)("data-v-165d35ea"),t=t(),(0,a.jt)(),t),D={class:"form-container"},_={style:{"text-align":"center",color:"#fff"}},z=y((()=>(0,a.Lk)("option",{value:""},"---selecione role---",-1))),U=["value"];function x(t,e,o,r,i,n){const l=(0,a.g2)("Icon");return(0,a.uX)(),(0,a.CE)("section",D,[(0,a.Lk)("header",null,[(0,a.bF)(l,{onClick:n.closePop,icon:"carbon:close-filled",class:"close-icon"},null,8,["onClick"])]),(0,a.Lk)("h2",_,(0,s.v_)(t.$props.propsData.title),1),(0,a.Lk)("form",{onSubmit:e[4]||(e[4]=(0,B.D$)((()=>{}),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.usernameField=t),type:"text",name:"",id:"username",placeholder:"Nome..."},null,512),[[B.Jo,i.usernameField]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>i.passwordField=t),type:"password",name:"",id:"password",placeholder:"password..."},null,512),[[B.Jo,i.passwordField]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>i.roleField=t),id:""},[z,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.roles,(t=>((0,a.uX)(),(0,a.CE)("option",{value:t.id},(0,s.v_)(t.nome),9,U)))),256))],512),[[B.u1,i.roleField]]),(0,a.Lk)("button",{onClick:e[3]||(e[3]=t=>n.submitForm(o.propsData.action)),type:"button"},(0,s.v_)(o.propsData.action??"---"),1)],32)])}var A=o(8384),E={components:{},data(){return{usernameField:this.propsData.data.username??"",passwordField:this.propsData.data.password??"",statusField:this.propsData.data.role??"",roleField:this.propsData.data.role_id??"",roles:[]}},methods:{closePop(){this.$store.state.popUp.show=!1},async getRoles(){try{return b.A.get(`${A.C}/role/?key=${A._}`).then((t=>{this.roles=t.data.data})),!0}catch(t){console.log("Error ao carregar roles",t)}},async RegisterUtililzador(){console.log(this.formData);try{return b.A.post(`${A.C}/utilizador/registrar/?key=${A._}`,this.formData).catch((t=>{this.$swal.fire({position:"top",icon:"warning",title:"Campo obrigatorio imcompleto",showConfirmButton:!1,timer:5e3,toast:!0})})),!0}catch(t){return!1}},async UpdateUtilizador(t){try{return b.A.put(`${A.C}/utilizador/${t}/atualizar/?key=${A._}`,this.formData).catch((t=>{this.$swal.fire({position:"top",icon:"warning",title:"Campo obrigatorio imcompleto",showConfirmButton:!1,timer:5e3,toast:!0})})),!0}catch(e){return!1}},async submitForm(t=null){"editar"===t?1==await this.UpdateUtilizador(this.propsData.data.id)?(this.$store.state.emiter=!this.$store.state.emiter,this.$swal.fire({position:"top",icon:"success",title:"Editado com sucesso",showConfirmButton:!1,timer:2e3,toast:!0}),console.log("Formdata: ",this.formData)):this.$swal({title:"Error!",text:"Falha ao fazer edição",icon:"error",confirmButtonText:"OK",timer:3e3,showCancelButton:!1,cancelButtonText:"Cancelar",reverseButtons:!1}):1==await this.RegisterUtililzador()?(this.$store.state.emiter=!this.$store.state.emiter,this.$swal.fire({position:"top",icon:"success",title:"Registrado com sucesso",showConfirmButton:!1,timer:1500,toast:!0})):this.$swal({title:"Error!",text:"Falha ao fazer registro",icon:"error",confirmButtonText:"OK",timer:3e3,showCancelButton:!1,cancelButtonText:"Cancelar",reverseButtons:!1})}},props:{propsData:Object},created(){this.getRoles()},computed:{formData(){return{username:""===this.usernameField?null:this.usernameField,password:""===this.passwordField?null:this.passwordField,role_id:""===this.specialtyField?null:this.roleField}}}},T=o(6262);const R=(0,T.A)(E,[["render",x],["__scopeId","data-v-165d35ea"]]);var N=R,X={components:{headerNav:F.A,asideNavBar:v.A,popup:$.A,utilizadorForm:N},data(){return{status:0,users:[],propsData:{title:"",data:{},action:""}}},methods:{openPopUp(t={},e="editar"){"editar"===e?(this.propsData.title="Editar Utilizador",this.propsData.data=t,this.propsData.action="editar"):(this.propsData.title=e+" Utilizador",this.propsData.data={},this.propsData.action=e)},async getAllUtilizador(){try{const t=await b.A.get(`${A.C}/utilizador/?key=${A._}`);this.users=t.data.data,this.status=t.status}catch(t){console.log(t?.response??t),this.$swal({title:"Error!",text:"Falha ao listar Utilizadores",icon:"error",confirmButtonText:"OK",timer:3e3,showCancelButton:!1,cancelButtonText:"Cancelar",reverseButtons:!1})}},deleteRegister(t){this.$swal({title:"Tem certeza?",text:"Você não poderá reverter isso!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim, deletar!",cancelButtonText:"Cancelar"}).then((e=>{if(e.isConfirmed)try{b.A.delete(`${A.C}/utilizador/${t}/deletar/?key=${A._}`,this.formData).catch((t=>{this.$swal.fire({position:"top",icon:"warning",title:"Algo deu errado!",showConfirmButton:!1,timer:5e3,toast:!0})})),this.$swal({title:"Deletado!",text:"Seu registro foi deletado.",icon:"success",confirmButtonText:"OK",timer:3e3,showCancelButton:!1,cancelButtonText:"Cancelar",reverseButtons:!1})}catch(o){this.$swal.fire({position:"top",icon:"warning",title:"Falha ao eliminar registro!",showConfirmButton:!1,timer:5e3,toast:!0})}}))}},created(){this.getAllUtilizador()},computed:{},watch:{}};const I=(0,T.A)(X,[["render",L],["__scopeId","data-v-4d3382d0"]]);var K=I}}]);
//# sourceMappingURL=6.5a269053.js.map