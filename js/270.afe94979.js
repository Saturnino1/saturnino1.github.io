"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[270],{8222:function(t,o,e){e.d(o,{A:function(){return C}});var r=e(641),s=e(33),i=e.p+"img/sem-foto.9c67fe05.png";const a={class:"card"},n={class:"img-container"},c=["src"],l={key:1,src:i,alt:"foto do produto"},d={class:"btn-form-row btn-container"};function u(t,o,e,i,u,p){const h=(0,r.g2)("Icon");return(0,r.uX)(),(0,r.CE)("div",a,[(0,r.Lk)("div",n,[null!=u.produto.foto?((0,r.uX)(),(0,r.CE)("img",{key:0,src:p.imgSrc,alt:"foto do produto"},null,8,c)):((0,r.uX)(),(0,r.CE)("img",l))]),(0,r.Lk)("footer",null,[(0,r.Lk)("h3",null,(0,s.v_)(u.produto.nome??"N/A")+" ( "+(0,s.v_)(u.produto.quantidade??"N/A")+" ) ",1),(0,r.Lk)("p",null,(0,s.v_)(u.produto.descricao??"N/A"),1),(0,r.Lk)("div",d,[(0,r.Lk)("button",{onClick:o[0]||(o[0]=t=>p.setProduto(u.produto)),title:"editar"},[(0,r.bF)(h,{class:"edit icon",icon:"raphael:edit"})]),(0,r.Lk)("button",{title:"eliminar",onClick:o[1]||(o[1]=t=>p.deleteRegister(u.produto.id))},[(0,r.bF)(h,{class:"delete icon",icon:"ic:round-delete"})])])])])}var p=e(8384),h=e(1250),m={data(){return{produto:this.propsData.data??{}}},computed:{imgSrc(){console.log("Produto solo: ",`${this.produto.foto}`),console.log("Url-produto completo: ",`${p.C}${this.produto.foto}`);let t=p.C.split("/api")[0];return`${t}${this.produto.foto}`}},props:{propsData:{type:Object,required:!0}},methods:{setProduto(t){this.$store.state.produto.data=t,this.$store.state.produto.action="update",console.log("Produto from card: ",this.$store.state.produto)},async deleteProduto(t){try{await h.A.delete(`${p.C}/produto/${t}/eliminar/?key=121212121`),this.$swal.fire({position:"top",icon:"success",title:"Produto eliminado com sucesso",showConfirmButton:!1,timer:1500,toast:!0}),this.$store.state.produto.updated=!this.$store.state.produto.updated}catch(o){console.log("Error ao eliminar produto: ",o),this.$swal.fire({position:"top",icon:"error",title:"Error ao eliminar produto",showConfirmButton:!1,timer:1500,toast:!0})}},deleteRegister(t){this.$swal({title:"Tem certeza?",text:"Você não poderá reverter isso!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim, deletar!",cancelButtonText:"Cancelar"}).then((o=>{if(o.isConfirmed)try{h.A.delete(`${p.C}/produto/eliminar/${t}/?key=${p._}`,this.formData).catch((t=>{this.$swal.fire({position:"top",icon:"warning",title:"Algo deu errado!",showConfirmButton:!1,timer:5e3,toast:!0})})),this.$store.state.emiter=!this.$store.state.emiter,this.$swal({title:"Deletado!",text:"Seu registro foi deletado.",icon:"success",confirmButtonText:"OK",timer:3e3,showCancelButton:!1,cancelButtonText:"Cancelar",reverseButtons:!1})}catch(e){console.log("Error ao eliminar produto: ",e),this.$swal.fire({position:"top",icon:"warning",title:"Falha ao eliminar registro!",showConfirmButton:!1,timer:5e3,toast:!0})}}))}},created(){console.log(this.base)}},f=e(6262);const g=(0,f.A)(m,[["render",u],["__scopeId","data-v-1ff5e372"]]);var C=g},7715:function(t,o,e){e.r(o),e.d(o,{default:function(){return g}});var r=e(641),s=e(9580),i=e(8241),a=e(8222),n=e(1250),c=e(8384);const l=t=>((0,r.Qi)("data-v-5df92761"),t=t(),(0,r.jt)(),t),d={class:"right-side"},u=l((()=>(0,r.Lk)("section",{class:"main-content",style:{"justify-content":"start","align-items":"start"}},[(0,r.Lk)("header",{class:"crud-title",id:"top"},[(0,r.Lk)("h2",null,"Configuração")]),(0,r.Lk)("section",{class:"produto-section"},[(0,r.Lk)("ul",null,[(0,r.Lk)("li",null," CARDS ")])])],-1))),p={data(){return{idField:0,fotoField:"",nomeField:"",descricaoField:"",categoria_id:0,tipo_id:0,produtos:[],categorias:[],tipos:[],selectedFoto:null,action:"Registrar"}},components:{ProdutoCard:a.A},watch:{fotoField(){console.log("Foto: ",this.fotoField)},"$store.state.produto.data":{handler(t,o){console.log("Produto: ",t),this.idField=t.id??0,this.nomeField=t.nome??"",this.descricaoField=t.descricao??"",this.scrollToSection("top"),document.getElementById("img").src=t.foto??"../assets/sem-foto.png"},deep:!0},"$store.state.produto.updated":{handler(t,o){this.getAllProdutos()},deep:!0}},computed:{formData(){return{id:this.idField,nome:this.nomeField,descricao:this.descricaoField,foto:this.fotoField}},imgSrc(t){return`${c.C}/${t}/?key=121212121`}},methods:{handleFileUpload(t){const o=t.target.files[0];console.log(o)},scrollToSection(t){document.getElementById(t).scrollIntoView({behavior:"smooth"})},onSelectFoto(t){this.selectedFoto=t.target.files[0],document.getElementById("img").src=URL.createObjectURL(this.selectedFoto)},async createProduto(){try{let t=new FormData;t.append("nome",this.nomeField),t.append("descricao",this.descricaoField),t.append("foto",this.selectedFoto);const o=await n.A.post(`${c.C}/produto/registrar/?key=${c._}`,t,{headers:{"Content-Type":"multipart/form-data"}});console.log(o.data),this.$swal({title:"Sucesso!",text:"Produto registrado com sucesso",icon:"success",confirmButtonText:"OK",timer:3e3,showCancelButton:!1,cancelButtonText:"Cancelar",reverseButtons:!1}),this.getAllProdutos()}catch(t){console.log(t?.response??t),this.$swal({title:"Error!",text:"Falha ao registrar Produto",icon:"error",confirmButtonText:"OK",timer:3e3,showCancelButton:!1,cancelButtonText:"Cancelar",reverseButtons:!1})}},async updateProduto(t){let o=new FormData;o.append("nome",this.nomeField),o.append("descricao",this.descricaoField),o.append("foto",this.selectedFoto);try{const t=await n.A.put(`${c.C}/produto/editar/${this.idField}/?key=${c._}`,o,{headers:{"Content-Type":"multipart/form-data"}});console.log(t.data),this.$swal({title:"Sucesso!",text:"Produto atualizado com sucesso",icon:"success",confirmButtonText:"OK",timer:3e3,showCancelButton:!1,cancelButtonText:"Cancelar",reverseButtons:!1}),this.getAllProdutos()}catch(e){console.log(e?.response??e),this.$swal({title:"Error!",text:"Falha ao atualizar Produto",icon:"error",confirmButtonText:"OK",timer:3e3,showCancelButton:!1,cancelButtonText:"Cancelar",reverseButtons:!1})}},async submitForm(t=null){"create"==this.$store.state.produto.action?this.createProduto():this.updateProduto(t)},async getAllProdutos(){try{const t=await n.A.get(`${c.C}/produto/?key=${c._}`);this.produtos=t.data.data,console.log("Dados de fun carregados",this.produtos)}catch(t){console.log(t?.response??t),this.$swal({title:"Error!",text:"Falha ao listar Produtos",icon:"error",confirmButtonText:"OK",timer:3e3,showCancelButton:!1,cancelButtonText:"Cancelar",reverseButtons:!1})}}},mounted(){},created(){}};var h=Object.assign(p,{__name:"Configuracao",setup(t){return(t,o)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(s.A),(0,r.Lk)("section",d,[(0,r.bF)(i.A),u])],64))}}),m=e(6262);const f=(0,m.A)(h,[["__scopeId","data-v-5df92761"]]);var g=f}}]);
//# sourceMappingURL=270.afe94979.js.map